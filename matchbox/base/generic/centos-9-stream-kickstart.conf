# Generated by Anaconda 34.25.4.1
# Generated by pykickstart v3.32
#version=RHEL9
# Use text mode install
text --non-interactive
# Reboot after installation
reboot
repo --name="AppStream" --baseurl=https://mirror.stream.centos.org/9-stream/AppStream/x86_64/os

%post
dnf makecache
mkdir -p /home/libvirt/lib
ln -s /home/libvirt/lib /var/lib/libvirt
chmod u+w /etc/sudoers
sed -i '/^%wheel/s;\(.ALL\)$;NOPASSWD:\1;' /etc/sudoers
chmod u-w /etc/sudoers

%end

%addon com_redhat_kdump --disable

%end

# Keyboard layouts
keyboard --vckeymap=us --xlayouts='us'
# System language
lang en_US.UTF-8

# Network information
network  --bootproto=dhcp --device=eno1 --hostname={{.domain_name}} --ipv6=auto --activate

# Use network installation
url --url="https://mirror.stream.centos.org/9-stream/BaseOS/x86_64/os/"

%packages
@^minimal-environment
cockpit

%end

# SELinux configuration
selinux --permissive

# Run the Setup Agent on first boot
firstboot --enable
# System services
services --disabled="kdump" --enabled="chronyd,cockpit.socket"
# Do not configure the X Window System
skipx

# Generated using Blivet version 3.6.0
ignoredisk --only-use={{.boot_drive}}
autopart
# Partition clearing information
clearpart --all --initlabel --drives={{.boot_drive}}

# System timezone
timezone America/New_York --utc

#Root password
rootpw --lock
sshkey --username=gmarcy "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAsdgW20NtVSpXRSmC5cjEKTN+p9Ju01EdPYHdtwqmyp homelab@gmarcy.com"
user --groups=wheel --name=gmarcy --lock --gecos="Glenn Marcy"

